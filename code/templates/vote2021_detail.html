{% extends "base.html" %}
{% load static %}
{% block content %}
	<div class="row col-12 mx-auto my-2" style="color: #b9b5b5;">
		<div class="card m-auto">
			<div class="card-header flex">
				<h2 class="col-12">{{ candidate }} 2021 Notary Election Votes Detail</h2>
			</div>
			<div class="card-body flex">
				<table id="{{ candidate }}_votes_table" class="table table-striped table-bordered" style="min-width: 50em;">
					<thead>
						<tr>
							<th data-data="block_height">BLOCK</th>
							<th data-data="votes">Votes</th>
							<th data-data="txid">TXID</th>
							<th data-data="lock_time">Lock Timestamp</th>
							<th data-data="lock_time_human">Locktime</th>
						</tr>
					</thead>
					<tbody>
						{% for item in vote2021_detail_table %}
							<tr>
								<td style="font-size: 1.2em;" data-data="block_height">{{ item.block_height }}</td>
								<td style="font-size: 1.2em;" data-data="votes">
									<span class='badge p-2'>
										{{ item.votes }}
									</span>
								</td>
								<td style="font-size: 1em;" data-data="txid">{{ item.txid }}</td>
								<td style="font-size: 1.2em;" data-data="lock_time">{{ item.lock_time }}</td>
								<td style="font-size: 1.2em;" data-data="lock_time_human">
									<span class='badge p-2'>
										{{ item.lock_time_human }}
									</span>
								</td>
							</tr>
						{% endfor %}
					</tbody>
				</table>
			</div>
		</div>	
	</div>
    <!-- jquery -->
  
  	<script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0"></script> 
    <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
  	
  	<script>
	    $(document).ready(function() {
	        $('#{{ candidate }}_votes_table').DataTable({
	            "pageLength": 50,
	        	"paging": true,
    			deferRender: true,
                "orderClasses": false,
        		order: [[ 0, 'desc' ]],
	        	"columns": [
			        { "data": "block_height" },
			        { "data": "votes" },
			        { "data": "txid" },
			        { "data": "lock_time" },
			        { "data": "lock_time_human" },
			    ],
		        "columnDefs": [
 					{ "orderData":[ 3 ],   "targets": [ 4 ] },
        			{
			            "targets": 0,
			            "fnCreatedCell": function (nTd, sData, oData, iRow, iCol) {
				            $(nTd).html("<span class='badge p-2'><a href='https://vote2021.komodod.com/b/"+oData.block_height+"'>"+oData.block_height+"</a><span>");
				        }
			        },
        			{
			            "targets": 2,
			            "fnCreatedCell": function (nTd, sData, oData, iRow, iCol) {
			            		$(nTd).html("<a href='https://vote2021.komodod.com/t/"+oData.txid+"'><span class='badge p-0' style='border-radius: 50%;' data-toggle='tooltip' data-placement='top' title='View "+oData.txid+" on block explorer'><i class='fa fa-search'></i></span></a>");
			            }
			        },
		            {
		                "targets": [ 3 ],
		                "visible": false
		            }
 				]
	        });
	    });
    </script> 
{% endblock %}
https://vote2021.explorer.dexstats.info/